<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><title>Shell脚本方便微服务部署 - i蝸居年華_谢谢谢_CODE_HOME</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="序言 之前作为一个开发狗. 并不太多涉及Linux系统管理. 对shell脚本也一无所知."><meta name="keywords" content="Linux,shell"><meta property="og:type" content="article"><meta property="og:title" content="Shell脚本方便微服务部署"><meta property="og:url" content="https://xiefayang.com/2017/02/15/shell脚本之方便微服务部署/index.html"><meta property="og:site_name" content="i蝸居年華_谢谢谢_CODE_HOME"><meta property="og:description" content="序言 之前作为一个开发狗. 并不太多涉及Linux系统管理. 对shell脚本也一无所知."><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2019-04-02T03:54:26.993Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Shell脚本方便微服务部署"><meta name="twitter:description" content="序言 之前作为一个开发狗. 并不太多涉及Linux系统管理. 对shell脚本也一无所知."><link rel="icon" href="/images/favicon.svg"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><link rel="stylesheet" href="/css/back-to-top.css"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?b59777544dd5d59ce94e191bac62427c";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><link rel="stylesheet" href="/css/progressbar.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><link rel="stylesheet" href="/css/style.css"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand is-flex-center"> <a class="navbar-item navbar-logo" href="/"><img src="/images/maotouying.svg" alt="Shell脚本方便微服务部署" height="28"> <span style="font-size:16px;display:inline-block;vertical-align:top;font-weight:600">i蝸居年華_谢谢谢</span></a></div><div class="navbar-menu"><div class="navbar-start"> <a class="navbar-item" href="/">首页</a> <a class="navbar-item" href="/archives">归档</a> <a class="navbar-item" href="/categories">分类</a> <a class="navbar-item" href="/tags">标签</a> <a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="文章目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><div class="box01"> <input type="text" id="tip" placeholder="You Know, for Search~"><i class="search_icon"></i></div></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column is-8-tablet is-8-desktop is-9-widescreen has-order-2 column-main"><div class="card"><div class="card-content article"><div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto"><div class="level-left"> <span style="color:#7a7a7a!important">写于2017-02-15 12:39:04&nbsp;&nbsp;&nbsp;</span><div class="level-item"> <a class="has-link-grey -link" href="/categories/Linux/">Linux</a></div> <span class="level-item has-text-grey">8 分钟 读完 (大约 1212 个字)</span><span class="level-item has-text-grey" id="busuanzi_container_page_pv"><i class="far fa-eye"></i> <span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"> Shell脚本方便微服务部署</h1><div class="content"><h3 id="序言"><a href="#序言" class="headerlink" title="序言"></a>序言</h3><blockquote><p>之前作为一个开发狗. 并不太多涉及Linux系统管理. 对shell脚本也一无所知.<a id="more"></a></p><p>但是对于jar包的部署和打包是要经常在Linux环境下的.</p><p>对于极度懒人的我来说过于繁琐, 每次都要命令来查询, 复制粘贴执行.</p></blockquote><p>能让计算机做的为什么要我们自己做呢哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈</p><p>只是为了解决当务之需才去研究shell. 并没有系统完整的学习shell</p><p>目前在测试和开发环境已经有十多个脚本来负责服务的批量和单个操作, 用起来得心应手, 能够实现:</p><ul><li>Git远端拉取指定分支的服务</li><li>mvn打包编译</li><li>单个/批量启停</li></ul><h3 id="关于shell"><a href="#关于shell" class="headerlink" title="关于shell"></a>关于shell</h3><p>shell用C语言编写, 是Linux管理中必不可少的. 也是系统和硬件交互的一种介质.</p><p>我们通过指令传给shell, shell再通过系统内核就能实现对计算机硬件的操作.</p><p>他有自己的命令和程序设计语言, 供我们编写, 在我看来, 如同PL/SQL编程</p><p>我们需要了解他的语法.</p><p>shell需要的环境超级简单:</p><ul><li>文本编辑器</li><li>脚本解释器</li></ul><p>所以在Linux环境下可以轻而易举的编写shell</p><h3 id="部署脚本"><a href="#部署脚本" class="headerlink" title="部署脚本"></a>部署脚本</h3><p>接下来按照我要实现的目的, 选择性的记录一些命令</p><h4 id="杀死服务进程"><a href="#杀死服务进程" class="headerlink" title="杀死服务进程"></a>杀死服务进程</h4><p>要杀死服务的进程, 需要先找到他的网络连接信息. 所以通常做法是先显示:程序</p><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -aux|grep java</span><br></pre></td></tr></table></figure><p>程序的标识, 状态, ID, 资源占用等信息就会显示出来</p><p>再找到进程的ID, 通过kill ID 来杀死这个服务</p><p><strong>lsof命令</strong></p><p>这里要说的是lsof命令: <a href="https://linux.cn/article-4099-1.html" target="_blank" rel="noopener">很好的lsof命令介绍</a></p><p>在这里我只用到 -i, -t, -sTCP</p><blockquote><p><strong>-i:[port]</strong>: 显示与指定端口相关的网络信息<br><strong>-t</strong>: 仅获取进程的ID<br><strong>-iTCP</strong>: 仅显示TCP连接(UDP同理)</p></blockquote><p>找出监听状态的端口:</p><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -i -sTCP:LISTEN</span><br></pre></td></tr></table></figure><p>使用grep命令 也可以获得:</p><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -i | grep -i LISTEN</span><br></pre></td></tr></table></figure><p>所以要杀死某个启动服务的进程如下:</p><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -15 `lsof -i:[端口号] -t -sTCP:LISTEN`</span><br></pre></td></tr></table></figure><p>再通过一个简单的if判断来确定进程已经杀死</p><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kill -15 `lsof -i:[端口号] -t -sTCP:LISTEN`</span><br><span class="line">sleep 1</span><br><span class="line">if [ -z $(lsof -i:[端口号] -t -s TCP:LISTEN) ]</span><br><span class="line">then  </span><br><span class="line">  echo " port killed! "</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p>在这里, 我写一个通过传参杀死服务进程的脚本 <code>killed_single_port.sh</code></p><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#</span>!/bin/bash</span><br><span class="line"></span><br><span class="line">printf " Please input killed port: "</span><br><span class="line"></span><br><span class="line">read port</span><br><span class="line"></span><br><span class="line">port_array=(8901 8902 8903 8905 8906 8907 8908 8909 8761 8050)</span><br><span class="line"></span><br><span class="line">result=`echo "$&#123;port_array[@]&#125;" | grep -wq "$port" &amp;&amp;  echo "y" || echo "n"`</span><br><span class="line"></span><br><span class="line">if [ "n" == "$&#123;result&#125;" ]</span><br><span class="line">then</span><br><span class="line">   echo "port:\"$&#123;port&#125;\" not exits ! "</span><br><span class="line">   exit 5</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">kill -15 `lsof -i:$&#123;port&#125; -t -sTCP:LISTEN`</span><br><span class="line">sleep 1</span><br><span class="line">if [ -z $(lsof -i:$&#123;port&#125; -t -s TCP:LISTEN) ]</span><br><span class="line">then</span><br><span class="line">  echo " port \"$&#123;port&#125;\" is killed! "</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">exit 5</span><br></pre></td></tr></table></figure><h4 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h4><p>通常, 用nohup命令来不挂断的运行命令来启动一个我们的服务</p><p><strong>nohup命令</strong></p><p>在Linux/Unix启动程序中, 我们一般希望是在后台运行, 在末尾加”&amp;”即可</p><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar /aa/bb/xxx.jar</span><br></pre></td></tr></table></figure><p>如果需要程序的启动信息 通过”&gt;”重定向到日志中</p><p>0、1和2分别表示标准输入、标准输出和标准错误信息输出，可以用来&gt; 指定需要重定向的标准输入或输出。</p><ul><li>0: 标准输入信息</li><li>1: 标准输出信息</li><li>2: 标准错误输出信息</li><li>/dev/null: 正常输出和错误信息都不显示</li></ul><p>例如:</p><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar /aa/bb/xxx.jar  \</span><br><span class="line">--server.port=8050 \</span><br><span class="line">--eureka.client.serviceUrl.defaultZone=http://127.0.0.1:8761/eureka/ \</span><br><span class="line"><span class="hljs-meta">&gt;</span>/my_log/zuul.log 2&gt;/my_log/zuul_error.log &amp;</span><br></pre></td></tr></table></figure><p>如果要批量启动几个程序, 这几个服务之间可能有关系.</p><p>如果把这几个程序的启动命令写到一个脚本中顺序执行肯定不行.</p><p>所以这里又用到lsof命令来获得一个程序的状态, 进而来判断是否继续执行</p><p>以下script实现判断当x服务启动以后, 再顺序执行a,b程序. 最后再判断a,b是否启动成功</p><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#</span>!/bin/bash</span><br><span class="line">echo "x server booting..."</span><br><span class="line">nohup java -jar /aa/bb/x.jar &amp;&gt;/dev/null &amp;</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span> 判断9900的x服务启动与否</span><br><span class="line">while [ -z "$(lsof -i:9000 -t -s TCP:LISTEN)" ] </span><br><span class="line">do</span><br><span class="line">  sleep 3</span><br><span class="line">done</span><br><span class="line">if [ -n "$(lsof -i:9000 -t -s TCP:LISTEN)" ]</span><br><span class="line">then</span><br><span class="line">  echo "x server start success!"</span><br><span class="line">else</span><br><span class="line">  echo "ERROR: x server boot failure !!!! "</span><br><span class="line">  exit 5</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span> 只有当9900的x服务启动成功后, 继续执行下面</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span> 启动a服务</span><br><span class="line">nohup java -jar /aa/bb/a_server.jar  \</span><br><span class="line">--server.port=8901 \</span><br><span class="line"><span class="hljs-meta">&gt;</span>/my_log/a.log 2&gt;/my_log/a_error.log &amp;</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span> 启动b服务</span><br><span class="line">nohup java -jar /aa/bb/b_server.jar  \</span><br><span class="line">--server.port=8902 \</span><br><span class="line"><span class="hljs-meta">&gt;</span>/my_log/b.log 2&gt;/my_log/b_error.log &amp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span> 判断a(port:8901),b(port:8902)服务是否启动成功</span><br><span class="line">i=2</span><br><span class="line">a_server=1</span><br><span class="line">b_server=1</span><br><span class="line"></span><br><span class="line">while [ 1 -gt 0 ] &amp;&amp; [ $&#123;i&#125; -gt 0 ]</span><br><span class="line">do</span><br><span class="line">  if [ -n "$(lsof -i:8901 -t -s TCP:LISTEN)" ] ]</span><br><span class="line">  then</span><br><span class="line">    echo "a server start success !!!"</span><br><span class="line">    i=$[ $&#123;i&#125; - 1 ]</span><br><span class="line">  fi</span><br><span class="line">  if [ -n "$(lsof -i:8902 -t -s TCP:LISTEN)" ] ]</span><br><span class="line">  then</span><br><span class="line">    echo "b server start success !!!"</span><br><span class="line">    i=$[ $&#123;i&#125; - 1 ]</span><br><span class="line">  fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure></div><ul class="post-copyright"><li><strong>本文标题：</strong><a href="https://xiefayang.com/2017/02/15/shell脚本之方便微服务部署/">Shell脚本方便微服务部署</a></li><li><strong>本文作者：</strong><a href="https://xiefayang.com">i蝸居年華_谢谢谢</a></li><li><strong>本文链接：</strong><a href="https://xiefayang.com/2017/02/15/shell脚本之方便微服务部署/">https://xiefayang.com/2017/02/15/shell脚本之方便微服务部署/</a></li><li><strong>发布时间：</strong>2017-02-15</li><li><strong>版权声明：</strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</li></ul><div class="level is-size-7 is-uppercase"><div class="level-start"><div class="level-item"> <span class="is-size-6 has-text-grey has-mr-7">#</span> <a class="has-link-grey -link" href="/tags/Linux/">Linux</a>, <a class="has-link-grey -link" href="/tags/shell/">shell</a></div></div></div></div></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">坚持原创技术分享，您的支持将鼓励我继续创作！</h3><div class="buttons is-centered"><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span> <span>微信</span><div class="qrcode"><img src="/images/wechatpay.png" alt="微信"></div></a></div></div></div><div class="card card-transparent"><div class="level post-navigation is-flex-wrap is-mobile"><div class="level-start"><a class="level level-item has-link-grey article-nav-prev" href="/2017/02/28/Centos搭建SVN服务器/"><i class="level-item fas fa-chevron-left"></i> <span class="level-item">Centos搭建SVN服务器</span></a></div><div class="level-end"> <a class="level level-item has-link-grey article-nav-next" href="/2016/12/31/docker初探/"><span class="level-item">Docker初探</span><i class="level-item fas fa-chevron-right"></i></a></div></div></div><div class="card"><div class="card-content"><h3 class="title is-5 has-text-weight-normal">评论</h3><div id="valine-thread" class="content"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({el:"#valine-thread",notify:!1,verify:!1,app_id:"yVPV2fAKC1B90Xnh2JjuPEAb-gzGzoHsz",app_key:"1i9DgF7j75Uq6OuM23etjjE9",placeholder:"Just go go, 支持Markdown~"})</script></div></div></div><div class="column is-4-tablet is-4-desktop is-3-widescreen has-order-1 column-left"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered"><div> <img class="image is-128x128 has-mb-6" src="/images/avatar.png" alt="i蝸居年華_谢谢谢" style="border-radius:50%"><p class="is-size-4 is-block"> i蝸居年華_谢谢谢</p><p class="is-size-6 is-block"> Just for fun</p><p class="is-size-6 is-flex is-flex-center has-text-grey"><i class="fas fa-map-marker-alt has-mr-7"></i> <span>Beijing, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading"> 文章</p><p class="title has-text-weight-normal"> 37</p></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading"> 分类</p><p class="title has-text-weight-normal"> 17</p></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading"> 标签</p><p class="title has-text-weight-normal"> 30</p></div></div></nav><div class="level"> <a class="level-item button is-link is-rounded" href="https://github.com/thank037" target="_blank">关注我</a></div><div class="level is-mobile"> <a class="level-item button is-white is-marginless" target="_blank" title="github" href="https://github.com/thank037" name><img src="/images/github.svg" style="width:20px;height:20px"></a> <a class="level-item button is-white is-marginless" target="_blank" title="gitee" href="https://gitee.com/thank037" name><img src="/images/gitee.svg" style="width:20px;height:20px"></a> <a class="level-item button is-white is-marginless" target="_blank" title="weibo" href="https://weibo.com/u/2139090054" name><img src="/images/weibo.svg" style="width:20px;height:20px"></a> <a class="level-item button is-white is-marginless" target="_blank" title="email" href="mailto:coderthank@163.com" name><img src="/images/email.svg" style="width:20px;height:20px"></a></div></div></div><div class="card widget column-left is-sticky" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label"> 文章目录</h3><ul class="menu-list"><li> <a class="is-flex" href="#序言"><span class="has-mr-6">1</span> <span>序言</span></a></li><li> <a class="is-flex" href="#关于shell"><span class="has-mr-6">2</span> <span>关于shell</span></a></li><li> <a class="is-flex" href="#部署脚本"><span class="has-mr-6">3</span> <span>部署脚本</span></a><ul class="menu-list"><li> <a class="is-flex" href="#杀死服务进程"><span class="has-mr-6">3.1</span> <span>杀死服务进程</span></a></li><li> <a class="is-flex" href="#启动服务"><span class="has-mr-6">3.2</span> <span>启动服务</span></a></li></ul></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start has-text-centered-mobile"> <a class="footer-logo is-block has-mb-6" href="/">i蝸居年華_谢谢谢</a><p class="is-size-7"> &copy; 2016—2019 i蝸居年華_谢谢谢&nbsp; 由<a href="http://hexo.io/" target="_blank">Hexo</a> 强力驱动<br> <span id="busuanzi_container_site_uv">您是第<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle"><p class="control"><a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-white is-large" target="_blank" title="Download on GitHub" href="https://github.com/thank037"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN")</script><script src="/js/animation.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer="defer"></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer="defer"></script><script src="/js/gallery.js" defer="defer"></script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now</a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer="defer"></script><script>document.addEventListener("DOMContentLoaded",function(){outdatedBrowser({bgColor:"#f25648",color:"#ffffff",lowerThan:"flex"})})</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer="defer"></script><script>document.addEventListener("DOMContentLoaded",function(){MathJax.Hub.Config({"HTML-CSS":{matchFontHeight:!1},SVG:{matchFontHeight:!1},CommonHTML:{matchFontHeight:!1},tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}})})</script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back-to-top.js" defer="defer"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer="defer"></script><script src="/js/clipboard.js" defer="defer"></script><script src="/js/main.js" defer="defer"></script><div class="searchbox ins-search"><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"> <input type="text" class="searchbox-input ins-search-input" placeholder="全文搜索站内文章~"><span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(无标题)"},CONTENT_URL:"/content.json"}</script><script src="/js/insight.js" defer="defer"></script><link rel="stylesheet" href="/css/search.css"><link rel="stylesheet" href="/css/insight.css"></body></html>